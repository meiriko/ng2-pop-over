!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/core"),require("rxjs/Rx"),require("rxjs")):"function"==typeof define&&define.amd?define(["exports","@angular/common","@angular/core","rxjs/Rx","rxjs"],e):e((t.ng=t.ng||{},t.ng["npm-module-seed"]=t.ng["npm-module-seed"]||{}),t.ng.common,t.ng.core,t.rxjs_Rx,t.rxjs)}(this,function(t,e,n,i,o){"use strict";var r=function(){function t(t){this.renderer=t,this.anchorTo=!1,this.xOffset=0,this.yOffset=0,this.visible$=new i.BehaviorSubject(!1)}return Object.defineProperty(t.prototype,"showOn",{set:function(t){this.showOnSubscription&&this.showOnSubscription.unsubscribe(),t&&(this.showOnSubscription=t.subscribe(this.show.bind(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideOn",{set:function(t){this.hideOnSubscription&&this.hideOnSubscription.unsubscribe(),t&&(this.hideOnSubscription=t.subscribe(this.hide.bind(this)))},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.hideOnSubscription&&this.hideOnSubscription.unsubscribe(),this.showOnSubscription&&this.showOnSubscription.unsubscribe()},t.prototype.ngAfterViewInit=function(){this.renderer.setStyle(this.content.nativeElement,"opacity","0"),this.renderer.setStyle(this.content.nativeElement,"visibility","hidden")},t.prototype.isPosition=function(t,e){return t.indexOf(e)>=0},t.prototype.computeAtPosition=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var o,r,s=(e||"").split(/\s+/);s.length>2&&console.warn("bad position: ",e);var p=t.getBoundingClientRect();return o=this.isPosition(s,"left")?p.left-n:this.isPosition(s,"right")?p.right+n:(p.left+p.right)/2,r=this.isPosition(s,"top")?p.top-i:this.isPosition(s,"bottom")?p.bottom+i:(p.top+p.bottom)/2,[o,r]},t.prototype.computePosition=function(t,e){var n,i,o=t.ownerDocument.body.getClientRects()[0];if(this.anchorTo){var r=this.anchorTo instanceof Node?this.anchorTo:e.target;l=this.computeAtPosition(r,this.at),n=l[0],i=l[1]}else d=[e.clientX,e.clientY],n=d[0],i=d[1];var s=this.computeAtPosition(t,this.my||"",this.xOffset,this.yOffset),p=s[0],c=s[1],h=t.getBoundingClientRect(),a=t.ownerDocument.body.getBoundingClientRect(),u=t.ownerDocument.documentElement;return p=p-h.left+a.left,c=c-h.top+a.top,[Math.max(5-o.left,Math.min(n-p,u.clientWidth-o.left-h.width-5)),Math.max(5-o.top,Math.min(i-c,u.clientHeight-o.top-h.height-5))];var l,d},t.prototype.hide=function(){this.renderer.setStyle(this.content.nativeElement,"opacity","0"),this.renderer.setStyle(this.content.nativeElement,"visibility","hidden"),this.visible$.next(!1),this.originalParent&&this.originalParent.appendChild(this.content.nativeElement)},t.prototype.show=function(t){var e=this;this.clickSubscription&&this.clickSubscription.unsubscribe(),this.visible$.next(!0);var n=this.content.nativeElement;this.originalParent=n.parentNode,n.ownerDocument.body.appendChild(n),this.renderer.setStyle(this.content.nativeElement,"visibility","inherit"),i.Observable.timer(0).take(1).subscribe(function(){var o=e.computePosition(n,t),r=o[0],s=o[1];e.renderer.setStyle(n,"top",s+"px"),e.renderer.setStyle(n,"left",r+"px"),e.renderer.setStyle(n,"opacity","1"),e.keepOnClickOutside||(e.clickSubscription=i.Observable.fromEvent(n.ownerDocument,"click").skipUntil(i.Observable.timer(0)).filter(function(t){return!n.contains(t.target)}).take(1).subscribe(function(t){return e.hide()}))})},t.prototype.toggle=function(t){var e=this;this.visible$.take(1).subscribe(function(n){return n?e.hide():e.show(t)})},t.decorators=[{type:n.Component,args:[{selector:"pop-over",styles:[".pop-over-content {\n            position: absolute;\n            transition: opacity 0.2s ease-in-out;\n            background: #FFFFFF;\n            z-index: 1060;\n        }"],template:'<div class="pop-over">\n        <div #popOverContent class="pop-over-content" [ngClass]="contentClass"\n             [class.shown]="visible$ | async">\n            <ng-content *ngIf="visible$ | async"></ng-content>\n        </div>\n    </div>'}]}],t.ctorParameters=function(){return[{type:n.Renderer2}]},t.propDecorators={showOn:[{type:n.Input,args:["show-on"]}],hideOn:[{type:n.Input,args:["hide-on"]}],keepOnClickOutside:[{type:n.Input,args:["keep-on-click-outside"]}],anchorTo:[{type:n.Input,args:["anchor-to"]}],my:[{type:n.Input}],at:[{type:n.Input}],xOffset:[{type:n.Input,args:["x-offset"]}],yOffset:[{type:n.Input,args:["y-offset"]}],contentClass:[{type:n.Input,args:["content-class"]}],content:[{type:n.ViewChild,args:["popOverContent"]}]},t}(),s=function(){function t(t){this.elRef=t}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(t){t.hasOwnProperty("showOn")&&this.setShowOn(),t.hasOwnProperty("hideOn")&&this.setHideOn()},t.prototype.setHideOn=function(){var t=this;this.popover&&(this.hideOn?this.popover.hideOn=o.Observable.merge.apply(o.Observable,this.hideOn.split(",").map(function(t){return t.trim()}).map(function(e){return o.Observable.fromEvent(t.elRef.nativeElement,e)})):this.popover.hideOn=o.Observable.empty())},t.prototype.setShowOn=function(){var t=this;this.popover&&(this.showOn?this.popover.showOn=o.Observable.merge.apply(o.Observable,this.showOn.split(",").map(function(t){return t.trim()}).map(function(e){return o.Observable.fromEvent(t.elRef.nativeElement,e)})):this.popover.showOn=o.Observable.empty())},t.decorators=[{type:n.Directive,args:[{selector:"[pop-over-trigger]"}]}],t.ctorParameters=function(){return[{type:n.ElementRef}]},t.propDecorators={popover:[{type:n.Input,args:["pop-over-trigger"]}],showOn:[{type:n.Input,args:["show-on"]}],hideOn:[{type:n.Input,args:["hide-on"]}]},t}(),p=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule],declarations:[r,s],exports:[r,s],entryComponents:[r]}]}],t.ctorParameters=function(){return[]},t}();t.PopoverModule=p,Object.defineProperty(t,"__esModule",{value:!0})});